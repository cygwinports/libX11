--- origsrc/libX11-1.1.3/configure.ac	2007-08-01 13:35:46.000000000 -0500
+++ src/libX11-1.1.3/configure.ac	2007-08-08 02:34:25.781250000 -0500
@@ -116,7 +116,7 @@
 		  
 # Checks for header files.
 AC_HEADER_STDC
-dnl AC_CHECK_HEADERS([stdio.h stdlib.h math.h])
+AC_CHECK_HEADERS([sys/time.h])
 
 # Checks for typedefs, structures, and compiler characteristics.
 
--- origsrc/libX11-1.1.3/src/xcb_io.c	2007-07-21 03:45:39.000000000 -0500
+++ src/libX11-1.1.3/src/xcb_io.c	2007-08-08 02:34:25.781250000 -0500
@@ -1,6 +1,10 @@
 /* Copyright (C) 2003-2006 Jamey Sharp, Josh Triplett
  * This file is licensed under the MIT license. See the file COPYING. */
 
+#ifdef HAVE_CONFIG_H
+#include <config.h>
+#endif
+
 #include "Xlibint.h"
 #include "locking.h"
 #include "Xxcbint.h"
@@ -10,6 +14,9 @@
 #include <assert.h>
 #include <stdlib.h>
 #include <string.h>
+#ifdef HAVE_SYS_TIME_H
+#include <sys/time.h>
+#endif
 
 /* Call internal connection callbacks for any fds that are currently
  * ready to read. This function will not block unless one of the
